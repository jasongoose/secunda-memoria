---
title: 3-1. 프로세스의 개요
date: 2024-11-26 21:58:21
categories:
  - Books
  - 쉽게 배우는 운영체제
#tags:
---
## 프로세스의 개념

### 프로그램

- 어떤 데이터를 사용하여 어떤 작업을 할지를 적은 절차로 저장장치에 보관된 정적인 상태를 가집니다.

### 프로세스

- 프로그램이 실행되기 위해서 메모리에 올라온 동적인 상태(=조건에 따라 상태가 달라짐)를 가집니다.
- 프로세스는 일반 사용자의 사용자 프로세스(user process)와 운영체제의 커널 프로세스(kernel process)가 섞여서 실행됩니다.

## 프로그램에서 프로세스로의 전환

### 프로세스 제어 블럭(Process Control Block, PCB)

- 운영체제가 프로세스를 처리할 때 필요한 정보를 담은 데이터 구조로, 메모리의 운영체제 영역에서 관리됩니다.
- 프로세스가 종료되면 프로세스와 함께 메모리로부터 같이 삭제됩니다.

![PCB](/images/pcb.png)

#### PCB의 구조

- 프로세스의 구분자(ID)
  - 메모리에 존재하는 여러 프로세스들 사이에서 구분할 수 있는 ID
- 메모리 관련 정보
  - 프로세스가 저장된 메모리 주소
  - 메모리 보호를 위한 경계 레지스터, 한계 레지스터 값
- 각종 중간값
  - 시분할 시스템 상에서 처리할 프로세스가 교체될 때마다 최근까지 사용한 각종 레지스터 데이터를 저장합니다.
  - 다음에 실행할 명령어의 주소를 지정한 PC도 여기에 포함됩니다.

## 프로세스의 상태

### 프로세스의 5가지 상태

#### 생성 상태

- 프로세스가 메모리에 올라오고 운영체제에 의해서 PCB가 생성된 상태

#### 준비 상태(create status)

- 생성된 프로세스를 CPU가 처리할 때까지 PCB가 준비 큐(ready queue)에서 기다리는 상태

#### 실행 상태(ready status)

- CPU가 일정한 시간(=타임 슬라이스) 동안 프로세스를 처리하는 상태
- 스케줄러에 의해서 CPU 코어의 개수만큼 dispatch 됩니다.
- 타임 슬라이스를 초과하려는 경우 클록 인터럽트에 의해서 다시 준비 상태로 돌아갑니다.

#### 대기 상태

- 실행 중 요청한 입출력 작업이 입출력 관리자에 의해서 완료될 때까지 입출력 장치별로 마련된 큐에서 기다리는 상태입니다.
- 입출력 관리자로부터 인터럽트가 전달되면 다시 준비 상태로 돌아갑니다.

#### 완료 상태(running status)

- 프로세스가 완료되어 PCB가 제거됩니다.
- 오류나 다른 프로세스에 의해서 비정상적으로 종료(abort)되는 경우 디버깅을 위해 abort 직전의 메모리 상태를 저장장치로 옮기는데 이를 코어 덤프(core dump)라고 합니다.

![프로세스의 5가지 상태](/images/process_state.png)

### CPU 스케줄러

- 프로세스의 상태를 적절한 시점에 세팅하여 모든 프로세스의 작업이 원만하게 이루어지도록 관리합니다.
- 준비 상태에 있던 프로세스를 실행 상태로 바꾸는 것을 "dispatch", 실행 상태에 있던 프로세스를 준비 상태로 바꾸는 것을 "timeout"이라고 합니다.
- 준비 상태에서 큐를 몇 개 운영할지, 큐에 있는 어떤 PCB를 dispatch할지를 결정합니다.

### 휴식 상태와 보류 상태

위 5개의 활성 상태(active status) 외에 추가로 존재하는 상태입니다.

#### 휴식 상태(pause status)

- 프로세스가 작업을 일시적으로 쉬고 있는 상태입니다.

#### 보류 상태(suspend status)

- 프로세스가 메모리로부터 쫓겨나 저장장치의 스왑 영역(swap area)에 임시적으로 보관되는 상태입니다.
- 아래와 같은 상황에 보류 상태로 전환됩니다.
  - 메모리 용량이 거의 찬 경우
  - 프로그램에 오류가 있어서 실행을 미뤄야 하는 경우
  - 바이러스와 같이 악의적으로 공격할 프로세스라고 판단되는 경우
  - 매우 긴 주기로 반복되는 프로세스인 경우
  - 대기 상태가 계속 길어지는 경우
- 대기 상태에서 옮겨지면 "보류 대기 상태(block suspend status)", 준비 상태에서 옮겨지면 "보류 준비 상태(ready suspend status)"로 구분합니다.

![휴식 상태, 보류 상태를 포함](/images/process_state_with_pause.png)
