---
title: 3-2. 프로세스 제어 블록과 문맥 교환
date: 2024-11-26 21:58:23
categories:
  - Books
  - 쉽게 배우는 운영체제
#tags:
---

## 프로세스 제어 블록

### 프로세스 제어 블록의 구성

#### 포인터

- 준비 상태 또는 대기 상태에 있는 프로세스는 linked list 구조로 연결되어 큐를 구현하는데 다음 PCB를 참조하기 위한 수단입니다.

#### 프로세스 상태

- 현재 프로세스가 가진 상태입니다.

#### 프로세스 구분자

- 운영체제가 메모리 위에 있는 프로세스들을 구분하기 위한 PID입니다.

#### 프로그램 카운터

- 다음에 실행할 명령어의 주소를 가리키는 PC 레지스터 값 입니다.

#### 프로세스 우선순위

- CPU 스케줄러 다음에 처리할 프로세스를 선정하는 기준으로, 우선순위가 높을수록 더 먼저 그리고 자주 실행됩니다.
- 준비 상태에 있는 PCB들은 우선순위별로 나뉘어 큐를 구성합니다.

#### 각종 레지스터 중간값

- 프로세스가 실행되는 중에 사용하던 CPU 레지스터의, 누산기(accumulator), 색인 레지스터(index, register), 스택 포인터(stack pointer) 등의 값이 저장됩니다.

#### 메모리 관리 정보

- 프로세스가 메모리에 존재하는 위치 정보, 메모리 보호를 위한 경계 레지스터와 한계 레지스터 값 등이 저장됩니다.
- 그외 세그먼테이션 테이블(segmentation table), 페이지 테이블(page table) 등의 정보도 보관합니다.

#### 할당된 자원 정보

- 프로세스 실행을 위해서 사용하는 입출력 자원이나 오픈 파일 등에 대한 정보를 가리킵니다.

#### 계정 정보

- 계정 번호, CPU 할당 시간, CPU 사용 시간 등 입니다.

#### PPID와 CPID

- 부모 프로세스의 PID, 자식 프로세스의 PID를 가리킵니다.

### 포인터의 역할

- 시스템 내에는 다양한 입출력 장치가 있기 때문에 인터럽트가 발생했을 때 준비 상태로 전환할 프로세스를 빠르게 찾을 수 있도록 대기 상태에 있는 PCB들은 입출력 장치별로 나뉘어 큐를 구성합니다.

![대기상태 큐](/images/ready_queue.png)

## 문맥 교환(Context Switch)

### 문맥 교환의 의미와 절차

- CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 작업입니다.
- 기존 실행 상태에 있던 PCB에는 현재까지 작업한 내용들이 저장되고 이제 실행 상태로 들어오는 PCB의 내용으로 CPU 레지스터들을 세팅하고 작업을 실행합니다.
- 문맥 교환은 타임아웃 인터럽트나 메모리 영역을 침범하여 발생한 인터럽트, 입출력 요청 등으로 일어납니다.

![문맥 교환](/images/context_switch.png)